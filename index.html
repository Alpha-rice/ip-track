<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>IP Monitor Minimal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="format-detection" content="telephone=no, email=no, address=no" />
  <meta name="color-scheme" content="light dark">
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="bar">
    <div class="bar-left">
      <span class="logo" aria-label="IP Monitor">IP</span>
      <div class="title-wrap">
        <span class="title">IP Monitor</span>
        <span id="status" class="status-dot" title="状態"></span>
      </div>
    </div>
    <div class="bar-right">
      <span class="pill"><span class="k">Avg</span><span id="avgInterval" class="v">-</span></span>
      <span class="pill"><span class="k">Chg</span><span id="changeCount" class="v">0</span></span>
    </div>
  </header>

  <main class="container compact">
    <section class="strip">
      <div class="ip-line" aria-live="polite">
        <span class="label">IP</span>
        <span id="currentIP" class="value">-</span>
      </div>
    </section>

    <details class="fold" id="settingsFold">
      <summary>設定</summary>
      <div class="grid">
        <label class="field">
          <span>優先ソース</span>
          <select id="sourcePref">
            <option value="auto">自動（一致優先）</option>
            <option value="http">HTTP</option>
            <option value="webrtc">WebRTC</option>
          </select>
        </label>

        <label class="field">
          <span>取得間隔: <strong id="intervalLabel">60s</strong></span>
          <input id="intervalSlider" type="range" min="15" max="300" step="5" value="60" />
          <input id="intervalSec" type="number" min="15" max="300" step="5" inputmode="numeric" value="60" class="inline-number" />
        </label>
      </div>
      <p id="mismatchNotice" class="note"></p>
      <div class="settings-actions">
        <button id="apply" class="btn secondary">設定を保存</button>
      </div>
    </details>

    <section class="table-wrap">
      <table class="mini three">
        <thead>
          <tr>
            <th>Icon</th>
            <th>ꓧ:M:S</th>
            <th>IP</th>
          </tr>
        </thead>
        <tbody id="historyBody"></tbody>
      </table>
    </section>
  </main>

  <nav class="bottom-bar">
    <button id="btnStart" class="ctrl primary">Start</button>
    <button id="btnStop" class="ctrl" disabled>Stop</button>
    <button id="btnGet" class="ctrl">Get</button>
    <button id="btnClear" class="ctrl danger">Clear</button>
  </nav>

  <script type="module" src="webrtc_ip.js"></script>
  <script type="module" src="db.js"></script>
  <script type="module" src="app.minimal.js"></script>
</body>
</html>
